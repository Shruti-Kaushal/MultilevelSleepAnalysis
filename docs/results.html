<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Results | MultilevelSleepAnalysis</title>
  <meta name="description" content="Chapter 5 Results | MultilevelSleepAnalysis" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Results | MultilevelSleepAnalysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Results | MultilevelSleepAnalysis" />
  
  
  

<meta name="author" content="Shruti Kaushal &amp; Clarissa Tai" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="missing-values.html"/>
<link rel="next" href="interactive-component.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MultilevelSleep</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#dataset-overview"><i class="fa fa-check"></i><b>2.1</b> Dataset Overview</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#data-collection"><i class="fa fa-check"></i><b>2.2</b> Data Collection</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#sleep"><i class="fa fa-check"></i><b>3.1</b> Sleep</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#actigraph"><i class="fa fa-check"></i><b>3.2</b> Actigraph</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#activity"><i class="fa fa-check"></i><b>3.3</b> Activity</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#saliva"><i class="fa fa-check"></i><b>3.4</b> Saliva</a></li>
<li class="chapter" data-level="3.5" data-path="data-transformation.html"><a href="data-transformation.html#user-info"><i class="fa fa-check"></i><b>3.5</b> User info</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#missing-value-plot"><i class="fa fa-check"></i><b>4.1</b> Missing Value Plot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#metric-formulation"><i class="fa fa-check"></i><b>5.1</b> Metric Formulation</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#preliminary-observations"><i class="fa fa-check"></i><b>5.1.1</b> Preliminary Observations</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#distribution-of-variables"><i class="fa fa-check"></i><b>5.1.2</b> Distribution of Variables</a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#distribution-of-sleep-quality-metric"><i class="fa fa-check"></i><b>5.1.3</b> Distribution of Sleep Quality Metric</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#establishing-direct-indirect-effects-on-sleep-quality"><i class="fa fa-check"></i><b>5.2</b> Establishing Direct &amp; Indirect Effects on Sleep Quality</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#bed-time-does-not-affect-sleep-quality"><i class="fa fa-check"></i><b>5.2.1</b> Bed Time Does Not Affect Sleep Quality</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#does-age-and-build-affect-sleep-quality"><i class="fa fa-check"></i><b>5.2.2</b> Does Age and Build Affect Sleep Quality?</a></li>
<li class="chapter" data-level="5.2.3" data-path="results.html"><a href="results.html#which-activities-are-deterimental-to-sleep-quality"><i class="fa fa-check"></i><b>5.2.3</b> Which Activities are Deterimental to Sleep Quality?</a></li>
<li class="chapter" data-level="5.2.4" data-path="results.html"><a href="results.html#how-do-biomarkers-affect-sleep-quality"><i class="fa fa-check"></i><b>5.2.4</b> How do Biomarkers Affect Sleep Quality?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MultilevelSleepAnalysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="results" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Results</h1>
<p>The results chapter is broadly divided into two sections - one for each of the goals of this project. The first section will document all preliminary findings related to the sleep measurements and the procedure of defining a metric for quantifying quality of sleep.</p>
<div id="metric-formulation" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Metric Formulation</h2>
<div id="preliminary-observations" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Preliminary Observations</h3>
<p>Formulating a metric requires an extensive analysis of the data to identify correlated variables. This is to avoid multicollinearity while defining the metric. Below is a correlation heatmap we generated for variables that do not have the format of a time stamp (for example hh:mm). We made the following observations -</p>
<ol style="list-style-type: decimal">
<li>Latency, defined as the time taken for the user to fall asleep after he gets into bed, does not seem to be correlated with anything</li>
<li>Total sleep time (TST) is not correlated with neither Number of Awakenings and Average Awakening Length. One would expect TST to be negatively correlated to both but that is not true</li>
<li>Movement, Fragmentation and Sleep Fragmentation index are highly correlated. It is not surprising as sleep fragmentation index is defined as the ratio of the two</li>
<li>Wake After Sleep Onset (WASO) is strongly positively correlated to almost every variable except for Efficiency</li>
<li>Efficiency, defined as percentage of sleep time on total sleep in bed, surprisingly is not correlated to Total Minutes in Bed</li>
</ol>
<p>Note: all coefficients are statistically significant with a default critical value of 0.05</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="distribution-of-variables" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Distribution of Variables</h3>
<p>There are 3 clusters in the heatmap (if we cut across the tree right below the highest line connecting efficiency and another cluster) which are consistent with the observations we made. To avoid multicollinearity, we picked variables from each of the clusters depending on the strength and significance of the correlation coefficient. We denote our metric by M. Intuitively, it should be higher for users who are able to sleep through the night and do not have any trouble falling asleep. Keeping this in mind, we came up with the following associations -</p>
<ol style="list-style-type: decimal">
<li>M <span class="math inline">\(\alpha\)</span> Total Sleep Time (TST)</li>
<li>M <span class="math inline">\(\alpha\)</span> <span class="math inline">\(\frac{1}{SleepFragmentation Index}\)</span></li>
<li>M <span class="math inline">\(\alpha\)</span> <span class="math inline">\(\frac{1}{Latency}\)</span></li>
<li>M <span class="math inline">\(\alpha\)</span> <span class="math inline">\(\frac{1}{AverageTimeSpentAwake}\)</span></li>
</ol>
<p>We combined the above associations as follows -</p>
<p><span class="math display">\[\begin{align*}
M \alpha (\frac{TST}{AverageTimeSpentAwake} + \frac{1}{SleepFragmentationIndex}).\frac{1}{Latency}
\end{align*}\]</span></p>
<p>The units of the right hand side are “per hh:mm” (because of addition of latency). Average Time Spent Awake is the product of Number of Awakenings and Average Awakening Length. Let the ratio of TST and Average Time Spent Awake be called sleep ratio.</p>
<p>Next, we quantified the distribution of variables involved in defining M. We wanted to include informative variables instead of the ones that remain constant across the cohort. Due to the small sample size, any analysis of such sort (constructing a metric) will have a selection bias and so the conclusions made throughout this section may not hold for a bigger cohort.</p>
<p>The box plot below shows the distribution of the Sleep Ratio and Sleep Fragmentation Index. The values for both ratios seems well distributed with no outliers.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Since Latency is not a ratio, we visualized it separately as a Cleveland dot plot. There are a lot users with latency time of 0 mins which is a problem since M is inversely proportional to latency. So, we added a dummy term to latency and replaced proportionality with equality (we assume proportionality constants to be 1 - discussed in Conclusions chapter)</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>We define the sleep quality of a user as -</p>
<p><span class="math display">\[\begin{align*}
M = (\frac{TST}{AverageTimeSpentAwake} + \frac{1}{SleepFragmentationIndex}).(\frac{1}{Latency + 1})
\end{align*}\]</span></p>
<p>In the case that other variables are 0, we simply replace them by 1. We did not add dummy terms as the none of the users in our cohort have <span class="math inline">\(TST = 0\)</span> or <span class="math inline">\(Number of Awakenings = 0\)</span>. M is always positive as all the variables involved are non-negative.</p>
</div>
<div id="distribution-of-sleep-quality-metric" class="section level3" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Distribution of Sleep Quality Metric</h3>
<p>We calculated the sleep quality metric for all users and visualized the results as a boxplot. The lowest value is 0.5902 corresponding to user 2 and the largest is 16.33 corresponding to user 12, who is also an outlier. We are interested in investigating users that fall below the lower hinge (users 2, 3, 8, 10, 16) and above the upper hinge (users 1, 12, 14, 20, 21).</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre><code>##         min lower-hinge      median upper-hinge         max 
##   0.5902389   1.2815906   3.0779926   6.6873567  16.3742315</code></pre>
<p>Having defined M, we wanted to see if it is capturing the quality of sleep. We used <code>Efficiency</code> to evaluate its accuracy. Given the definition of Efficiency, it should be positively correlated to M.</p>
<p>To test the relationship, we generated a log-log scale plot. We used a log10 scale to normalize the values and to see how the magnitudes of the two variables are related. The regression model is statistically significant with a p-value of 3.681e-05. Positive slope suggests that as M increases, efficiency also increases. However, the adjusted R square value is 0.6 which means that the model captures less than 70% of the variance.</p>
<p>In summary, the metric defined by the formula above seems to be capturing the information that directly affects the sleep quality of a user. Moreover, the statistical significance combined with the positive slope of the regression model and line prove to be a sanity check for our metric.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
</div>
</div>
<div id="establishing-direct-indirect-effects-on-sleep-quality" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Establishing Direct &amp; Indirect Effects on Sleep Quality</h2>
<p>In this section, we tried to identify variables that are correlated to sleep quality in some way. The relationships identified cannot be interpreted to be causal as correlation doesn’t imply causation.</p>
<p>This section is divided further into subsections for each file in the dataset. Due to redundancy in data, we analyzed only 4 out of the 7 files - sleep records, user information, activities performed and saliva samples.</p>
<div id="bed-time-does-not-affect-sleep-quality" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Bed Time Does Not Affect Sleep Quality</h3>
<p>The practice going to bed early and rising early is encouraged for better sleep and health. We wanted to test this hypothesis using our metric.</p>
<p>We generated a scatterplot and concluded that bed time does not have affect sleep quality. There is no linear relationship; some participants who went to bed later than “usual” have a higher sleep quality than most participants who went to bed early. Similar conclusion can be made for the time a participant got out of bed. The data has high variance and so we cannot conclude that bed times and sleep quality are related.</p>
<p>This can be justified as sleep quality is most likely to be affected by how tired the user feels and total time they slept the day before.</p>
<pre><code>##  [1] &quot;user_1&quot;  &quot;user_2&quot;  &quot;user_3&quot;  &quot;user_4&quot;  &quot;user_5&quot;  &quot;user_6&quot;  &quot;user_7&quot; 
##  [8] &quot;user_8&quot;  &quot;user_9&quot;  &quot;user_10&quot; &quot;user_12&quot; &quot;user_13&quot; &quot;user_14&quot; &quot;user_15&quot;
## [15] &quot;user_16&quot; &quot;user_17&quot; &quot;user_18&quot; &quot;user_19&quot; &quot;user_20&quot; &quot;user_21&quot; &quot;user_22&quot;</code></pre>
<p><img src="finalproj_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="does-age-and-build-affect-sleep-quality" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Does Age and Build Affect Sleep Quality?</h3>
<p>It has been seen that as a person ages their quality of sleep deteriorates. We analyzed the relationship between age and our sleep quality metric to see if such a pattern emerges. A general trend appeared in the scatterplot, excluding certain outliers. M seems to be linearly related to age till a threshold of 30 years. We saw a sharp decline in sleep quality for users older than 30 years. Moreover, sleep quality remained more or less constant beyond the threshold and is much lower compared to young adults. It is important to keep in mind that sample ages are extremely skewed and so similar pattern might not emerge with the addition of more middle aged users.</p>
<p>Next, we wanted to see if taller people sleep better or not. Similar to the ages, height of users is also skewed. However, we still see close to a linear relationship with a negative slope between M and height till 190 cm. One reason could be, it is easier for short people to get comfortable in bed and that helps them sleep better. We did not categorize users as outliers due to small sample size and low diversity.</p>
<p>We then moved on to see if weight affects sleep quality. As expected, there seems to be no direct relationship between the two. The scatterplot shows the spread of the data which doesn’t have any discernible pattern. Users with weight 70 kg and 80 kg have a range of values for sleep quality.</p>
<p>Since the authors of the data only studied males, we cannot conclude if one gender is inclined to have better sleep quality than another. We refrained from adding more geneder levels in the plot to be politically correct.</p>
<p><img src="finalproj_files/figure-html/figures-side-1.png" width="50%" /><img src="finalproj_files/figure-html/figures-side-2.png" width="50%" /><img src="finalproj_files/figure-html/figures-side-3.png" width="50%" /><img src="finalproj_files/figure-html/figures-side-4.png" width="50%" /></p>
</div>
<div id="which-activities-are-deterimental-to-sleep-quality" class="section level3" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Which Activities are Deterimental to Sleep Quality?</h3>
<p>From the <code>Activity.csv</code>, we explored the correlation between the sleep quality metric we defined and the total time each user spent on each activity throughout the day. Referring to the graph below, we decided to discuss the common factors, such as heavy activities, screen usage. Initially, we were also curious about the alcohol and caffeine consumption. However, the data was not enough to perform such analysis.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-23-1.png" width="672" />
The correlation between the total time each user spent on each activity and the sleep quality metric is shown below. Here, we only cared about how the factors affect sleep quality. From the heat map, it is clear there are no significant correlation factors.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>Next, we tried to group the factors and took <code>time</code> factor into consideration. Will using screen before sleeping affect users’ sleep quality? We first explored <code>small screen usage</code> and <code>large screen usage</code> individually. Overall, it is less likely that using small screen device 4 hours before sleep will affect sleep quality.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-25-1.png" width="50%" /><img src="finalproj_files/figure-html/unnamed-chunk-25-2.png" width="50%" /><img src="finalproj_files/figure-html/unnamed-chunk-25-3.png" width="50%" /><img src="finalproj_files/figure-html/unnamed-chunk-25-4.png" width="50%" /></p>
<!-- Heavy activity -->
<!-- ```{r, out.width="50%"} -->
<!-- ggplot(df_act, aes(heavy,M)) +  -->
<!--   geom_point() +  -->
<!--   labs(title = "Sleep Quality vs Heavy Activity") + -->
<!--   theme_bw()+  -->
<!--   geom_smooth(method=lm)  -->
<!-- ``` -->
</div>
<div id="how-do-biomarkers-affect-sleep-quality" class="section level3" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> How do Biomarkers Affect Sleep Quality?</h3>
<p>Research has shown that cortisol and melatonin are hormones produced by our body that regulate circadian rhythm and our internal body clock.</p>
<p>Melatonin eases you into sleep and helps you stay asleep. The production of melatonin is triggered by darkness and is inhibitted by light. This means that people who sleep well are expected to have a high concentration of melatonin before going to sleep and much lesser when they wake up. Cortisol helps you get up and keeps you awake. So, in conclusion, to be able to sleep well you should have low levels of cortisol before sleeping and high levels after you wake up as cortisol and melatonin have opposing rhythms.</p>
<p>We wanted to see how our metric performs against these biomarkers and plotted a bar graph of differences in concentration (before sleep - after sleep) for each of the hormones and participants. Since the actual concentrations of melatonin run in <span class="math inline">\(10^{-9}\)</span> the differences are really not small and range from -10 to 10, given the scale. We saw that only three users/participants have negative cortisol difference levels.</p>
<p>To better understand if our metric catches the affects of these hormones on sleep quality, we generated a bar graph of M. There isn’t any “obvious” relationship between our metric and the hormones. However, our metric does seem to catch the anomalies like user 2 and 12 that fall on the two extremes. User 2 scored the lowest on sleep quality and has the highest differnece in cortisol levels among the cohort. The presence of more melatonin indicates a possibility of circadian rhythm of user 2 being messed up. In case of user 12, he is the only participant with an ideal combination of differences in concentration levels and also has the highest sleep quality among all.</p>
<p>There are users that don’t follow a trend like user 1. One would think that user 1 would have low sleep quality given the differences but in fact ranks second in sleep quality.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-28-1.png" width="672" /><img src="finalproj_files/figure-html/unnamed-chunk-28-2.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="missing-values.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interactive-component.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Shruti-Kaushal/MultilevelSleepAnalysis/edit/main/05-results.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Shruti-Kaushal/MultilevelSleepAnalysis/blob/main/05-results.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
